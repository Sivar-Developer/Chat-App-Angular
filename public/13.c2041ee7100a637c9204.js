(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{EdD2:function(e,t,n){"use strict";n.r(t),n.d(t,"ChatModule",(function(){return A}));var a=n("d2mR"),r=n("iInd"),i=n("JOmB"),o=n("hexV"),l=n("8Y7J"),s=n("IheW"),c=function(){function e(e,t){this.http=e,this.core=t}return e.prototype.inbox=function(){return this.http.get(this.core.api_url+"/api/chat/inbox")},e.prototype.conversation=function(e){return this.http.get(this.core.api_url+"/api/chat/conversation/"+e)},e.prototype.conversationWithUser=function(e){return this.http.get(this.core.api_url+"/api/chat/conversation/user/"+e)},e.prototype.storeMessage=function(e){return this.http.post(this.core.api_url+"/api/chat/message/store",e)},e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275inject"](s.c),l["\u0275\u0275inject"](o.a))},e.\u0275prov=l["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),m=function(){function e(e,t){this.http=e,this.core=t}return e.prototype.index=function(){return this.http.get(this.core.api_url+"/api/users")},e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275inject"](s.c),l["\u0275\u0275inject"](o.a))},e.\u0275prov=l["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),d=n("1+nf"),u=n("px0D"),p=n("aLe/"),g=n("SVse"),f=n("s7LF"),h=n("WJhm"),v=n("66zS");function x(e,t){1&e&&l["\u0275\u0275element"](0,"i",28)}function C(e,t){if(1&e&&(l["\u0275\u0275elementContainerStart"](0),l["\u0275\u0275element"](1,"img",36),l["\u0275\u0275elementContainerEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]().$implicit;l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("src",null==n||null==n.user?null:n.user.avatarImageUrl,l["\u0275\u0275sanitizeUrl"])}}function b(e,t){if(1&e&&(l["\u0275\u0275elementContainerStart"](0),l["\u0275\u0275element"](1,"img",36),l["\u0275\u0275elementContainerEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]().$implicit;l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("src",null==n||null==n.user?null:n.user.avatarImageUrl,l["\u0275\u0275sanitizeUrl"])}}function S(e,t){if(1&e&&(l["\u0275\u0275elementContainerStart"](0),l["\u0275\u0275template"](1,C,2,1,"ng-container",35),l["\u0275\u0275template"](2,b,2,1,"ng-container",35),l["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit,a=l["\u0275\u0275nextContext"](2).$implicit,r=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",(null==n.user?null:n.user.id)!==r.authService.user.id),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",1==a.chat_participants.length)}}function _(e,t){if(1&e&&(l["\u0275\u0275elementContainerStart"](0),l["\u0275\u0275template"](1,S,3,2,"ng-container",31),l["\u0275\u0275elementContainerEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]().$implicit;l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngForOf",n.chat_participants)}}function y(e,t){if(1&e&&(l["\u0275\u0275elementContainerStart"](0),l["\u0275\u0275text"](1),l["\u0275\u0275elementContainerEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]().$implicit;l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",null==n.user?null:n.user.name," ")}}function E(e,t){if(1&e&&(l["\u0275\u0275elementContainerStart"](0),l["\u0275\u0275text"](1),l["\u0275\u0275elementContainerEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]().$implicit;l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",null==n.user?null:n.user.name," ")}}function M(e,t){if(1&e&&(l["\u0275\u0275elementContainerStart"](0),l["\u0275\u0275template"](1,y,2,1,"ng-container",35),l["\u0275\u0275template"](2,E,2,1,"ng-container",35),l["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit,a=l["\u0275\u0275nextContext"]().$implicit,r=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",(null==n.user?null:n.user.id)!==r.authService.user.id),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",1==a.chat_participants.length)}}function I(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"a",29),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var e=t.$implicit;return l["\u0275\u0275nextContext"](2).chatConversation(e.chat_participants,e.id)})),l["\u0275\u0275elementStart"](1,"div",30),l["\u0275\u0275template"](2,_,2,1,"ng-container",31),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"div",32),l["\u0275\u0275elementStart"](4,"div",33),l["\u0275\u0275template"](5,M,3,2,"ng-container",31),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"div",34),l["\u0275\u0275text"](7),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,r=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngForOf",null==a?null:a.chat_participants),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngForOf",a.chat_participants),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate2"](" ",(null==a.chat_messages[0]?null:a.chat_messages[0].sender_id)==(null==r.authService.user?null:r.authService.user.id)?"You:":null," ",null==a.chat_messages[0]?null:a.chat_messages[0].body," ")}}function O(e,t){if(1&e&&(l["\u0275\u0275elementContainerStart"](0),l["\u0275\u0275template"](1,I,8,4,"a",12),l["\u0275\u0275elementContainerEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngForOf",n.conversations)}}function k(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"p"),l["\u0275\u0275text"](1,"No Conversation"),l["\u0275\u0275elementEnd"]())}function w(e,t){1&e&&l["\u0275\u0275element"](0,"i",28)}function P(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"a",29),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var e=t.$implicit;return l["\u0275\u0275nextContext"]().chatConversationWithUser(e.id)})),l["\u0275\u0275elementStart"](1,"div",30),l["\u0275\u0275element"](2,"img",36),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](3,"div",32),l["\u0275\u0275elementStart"](4,"div",34),l["\u0275\u0275text"](5),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"div",33),l["\u0275\u0275text"](7),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit;l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("src",a.avatarImageUrl,l["\u0275\u0275sanitizeUrl"]),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate1"](" ",a.email," "),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",a.name," ")}}var j=function(e){return["message",e]};function z(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",37),l["\u0275\u0275elementStart"](1,"div",38),l["\u0275\u0275elementStart"](2,"div",39),l["\u0275\u0275text"](3),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"div"),l["\u0275\u0275text"](5),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"div",40),l["\u0275\u0275element"](7,"img",41),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,a=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("ngClass",l["\u0275\u0275pureFunction1"](5,j,(null==a.authService.user?null:a.authService.user.id)!==(null==n.sender?null:n.sender.id)?"answer":"")),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate2"](" ",null==n.sender?null:n.sender.name," ",n.created_at," "),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](n.body),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("src",(null==a.authService.user?null:a.authService.user.id)!==(null==n.sender?null:n.sender.id)?n.sender.avatarImageUrl:"assets/images/avatars/avatar-2.png",l["\u0275\u0275sanitizeUrl"])}}var U=n("xn8y"),F=[{path:"",component:function(){function e(e,t,n){this.authService=e,this.userService=t,this.chatService=n,this.dialogs=U,this.activeIndex=0,this.name="",this.avatar="assets/images/avatars/1.jpg"}return e.prototype.ngOnInit=function(){this.chatInbox(),this.usersIndex()},e.prototype.usersIndex=function(){var e=this;this.userService.index().subscribe((function(t){e.users=t}))},e.prototype.chatInbox=function(){var e=this;this.chatService.inbox().subscribe((function(t){e.conversations=t,console.log(e.conversations)}))},e.prototype.chatConversation=function(e,t){var n=this;e.forEach((function(e){var t,a;(null===(t=e.user)||void 0===t?void 0:t.id)!=n.authService.user.id&&(n.participantId=null===(a=e.user)||void 0===a?void 0:a.id)})),this.message=null,this.chatService.conversation(t).subscribe((function(e){n.messages=e,n.chatInbox()}))},e.prototype.chatConversationWithUser=function(e){var t=this;this.message=null,this.chatService.conversationWithUser(e).subscribe((function(n){t.messages=n,t.participantId=e,t.chatInbox()}))},e.prototype.chatStoreMessage=function(e){var t=this;this.chatService.storeMessage({chat_conversation_id:e,chat_participant_id:this.participantId,message:this.message}).subscribe((function(){t.message=null,t.chatService.conversation(e).subscribe((function(e){t.messages=e,t.chatInbox()}))}))},e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](i.a),l["\u0275\u0275directiveInject"](m),l["\u0275\u0275directiveInject"](c))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-chat-inbox"]],decls:41,vars:9,consts:[[1,"row"],[1,"col-12","col-md-3","offset-md-1"],["nzTitle","Inbox"],[1,"mb-4"],[3,"nzPrefix"],["type","text","nz-input","","placeholder","Search user"],["prefixTemplate",""],[1,"dialogs"],[2,"height","100%"],[4,"ngIf","ngIfElse"],["noconversations",""],["nzTitle","Active Users"],["class","d-flex flex-nowrap align-items-center mb-3",3,"click",4,"ngFor","ngForOf"],[1,"col-12","col-md-6"],[1,"card"],[1,"card-header","card-header-flex","align-items-center"],[1,"d-flex","flex-column","justify-content-center","mr-auto"],[1,"mb-0","mr-2","font-size-18"],[1,"card-body"],[1,"height-400"],[1,"d-flex","flex-column","justify-content-end","pr-2","height-100p"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"pt-2","pb-2"],[1,"input-group","mb-3"],["type","text","placeholder","Send message...",1,"form-control",3,"ngModel","ngModelChange","keyup.enter"],[1,"input-group-append"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"fe","fe-send","align-middle"],["nz-icon","","nzType","search"],[1,"d-flex","flex-nowrap","align-items-center","mb-3",3,"click"],[1,"kit__utils__avatar","kit__utils__avatar--size46","mr-3","flex-shrink-0"],[4,"ngFor","ngForOf"],[1,"flex-grow-1","info"],[1,"text-dark","font-size-18","font-weight-bold","text-truncate"],[1,"font-size-12","text-truncate","text-gray-6"],[4,"ngIf"],["alt","item.name",3,"src"],[3,"ngClass"],[1,"messageContent"],[1,"text-gray-4","font-size-12","text-uppercase"],[1,"kit__utils__avatar","messageAvatar"],["alt","Avatar",3,"src"]],template:function(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275elementStart"](1,"div",0),l["\u0275\u0275elementStart"](2,"div",1),l["\u0275\u0275elementStart"](3,"nz-tabset"),l["\u0275\u0275elementStart"](4,"nz-tab",2),l["\u0275\u0275elementStart"](5,"div",3),l["\u0275\u0275elementStart"](6,"nz-input-group",4),l["\u0275\u0275element"](7,"input",5),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](8,x,1,0,"ng-template",null,6,l["\u0275\u0275templateRefExtractor"]),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](10,"div",7),l["\u0275\u0275elementStart"](11,"perfect-scrollbar",8),l["\u0275\u0275template"](12,O,2,1,"ng-container",9),l["\u0275\u0275template"](13,k,2,0,"ng-template",null,10,l["\u0275\u0275templateRefExtractor"]),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](15,"nz-tab",11),l["\u0275\u0275elementStart"](16,"div",3),l["\u0275\u0275elementStart"](17,"nz-input-group",4),l["\u0275\u0275element"](18,"input",5),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](19,w,1,0,"ng-template",null,6,l["\u0275\u0275templateRefExtractor"]),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](21,"div",7),l["\u0275\u0275elementStart"](22,"perfect-scrollbar",8),l["\u0275\u0275template"](23,P,8,3,"a",12),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](24,"div",13),l["\u0275\u0275elementStart"](25,"div",14),l["\u0275\u0275elementStart"](26,"div",15),l["\u0275\u0275elementStart"](27,"div",16),l["\u0275\u0275elementStart"](28,"h5",17),l["\u0275\u0275text"](29),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](30,"div",18),l["\u0275\u0275elementStart"](31,"div",19),l["\u0275\u0275elementStart"](32,"perfect-scrollbar"),l["\u0275\u0275elementStart"](33,"div",20),l["\u0275\u0275template"](34,z,8,7,"div",21),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275element"](35,"div",22),l["\u0275\u0275elementStart"](36,"div",23),l["\u0275\u0275elementStart"](37,"input",24),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.message=e}))("keyup.enter",(function(){return t.chatStoreMessage(null==t.messages[0]?null:t.messages[0].chat_conversation_id)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](38,"div",25),l["\u0275\u0275elementStart"](39,"button",26),l["\u0275\u0275listener"]("click",(function(){return t.chatStoreMessage(null==t.messages[0]?null:t.messages[0].chat_conversation_id)})),l["\u0275\u0275element"](40,"i",27),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275reference"](9),a=l["\u0275\u0275reference"](14);l["\u0275\u0275advance"](6),l["\u0275\u0275property"]("nzPrefix",n),l["\u0275\u0275advance"](6),l["\u0275\u0275property"]("ngIf",t.conversations)("ngIfElse",a),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("nzPrefix",n),l["\u0275\u0275advance"](6),l["\u0275\u0275property"]("ngForOf",t.users),l["\u0275\u0275advance"](6),l["\u0275\u0275textInterpolate1"](" ",t.name," "),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngForOf",t.messages),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngModel",t.message),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("disabled",!t.message)}},directives:[d.b,d.a,u.b,u.c,u.a,p.a,g.o,g.n,f.c,f.m,f.p,h.a,v.b,g.m],styles:['.dialogs[_ngcontent-%COMP%]{height:100%}@media (max-width:575px){.dialogs[_ngcontent-%COMP%]{max-height:16rem;margin-bottom:1rem}}.item[_ngcontent-%COMP%]{padding:.66rem;cursor:pointer;border-radius:5px;margin-bottom:1rem}.item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.item[_ngcontent-%COMP%]:hover{background-color:#f9fafc}.current[_ngcontent-%COMP%], .current[_ngcontent-%COMP%]:hover{background-color:#f2f4f8}.info[_ngcontent-%COMP%]{min-width:0}.unread[_ngcontent-%COMP%]{min-width:15px}.message[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:flex-end;justify-content:flex-end;margin-top:1rem;overflow:hidden;flex-shrink:0}.message.answer[_ngcontent-%COMP%]{flex-direction:row-reverse}.message.answer[_ngcontent-%COMP%]   .messageAvatar[_ngcontent-%COMP%]{margin-left:0;margin-right:1rem}.message.answer[_ngcontent-%COMP%]   .messageContent[_ngcontent-%COMP%]:before{left:auto;right:100%;border:5px solid transparent;border-right:4px solid #f2f4f8;border-left:none}.messageAvatar[_ngcontent-%COMP%]{flex-shrink:0;margin-left:1rem}.messageContent[_ngcontent-%COMP%]{background-color:#f2f4f8;position:relative;border-radius:5px;padding:.4rem 1rem}.messageContent[_ngcontent-%COMP%]:before{content:"";position:absolute;left:100%;bottom:16px;width:0;height:0;border:5px solid transparent;border-right:none;border-left:4px solid #f2f4f8}[data-kit-theme=dark][_nghost-%COMP%]   .messageContent[_ngcontent-%COMP%], [data-kit-theme=dark]   [_nghost-%COMP%]   .messageContent[_ngcontent-%COMP%]{background-color:#141322}[data-kit-theme=dark][_nghost-%COMP%]   .messageContent[_ngcontent-%COMP%]:before, [data-kit-theme=dark]   [_nghost-%COMP%]   .messageContent[_ngcontent-%COMP%]:before{border-left-color:#141322}[data-kit-theme=dark][_nghost-%COMP%]   .message.answer[_ngcontent-%COMP%]   .messageContent[_ngcontent-%COMP%]:before, [data-kit-theme=dark]   [_nghost-%COMP%]   .message.answer[_ngcontent-%COMP%]   .messageContent[_ngcontent-%COMP%]:before{border-right-color:#141322}[data-kit-theme=dark][_nghost-%COMP%]   .item.current[_ngcontent-%COMP%], [data-kit-theme=dark]   [_nghost-%COMP%]   .item.current[_ngcontent-%COMP%], [data-kit-theme=dark][_nghost-%COMP%]   .item[_ngcontent-%COMP%]:hover, [data-kit-theme=dark]   [_nghost-%COMP%]   .item[_ngcontent-%COMP%]:hover{background-color:#232135}']}),e}(),data:{title:"Chat Inbox"}}],$=function(){function e(){}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.j.forChild(F)],r.j]}),e}(),A=function(){function e(){}return e.\u0275mod=l["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.a,$,f.i,f.r,p.b]]}),e}()},xn8y:function(e){e.exports=JSON.parse('[{"name":"Hellen Maggie","avatar":"assets/images/avatars/3.jpg","unread":1,"position":"Administrator","dialog":[{"owner":"you","time":"5 min ago","content":"Hi! Anyone here? I want to know how I can buy Air UI?"},{"owner":"hellen","time":"5 min ago","content":"Please call us + 100 295 000"},{"owner":"you","time":"5 min ago","content":"Hi! Anyone here? I want to know how I can buy Air UI?"},{"owner":"hellen","time":"5 min ago","content":"Please call us + 100 295 000"}]},{"name":"Dean Beckham","avatar":"assets/images/avatars/1.jpg","unread":2,"position":"Moderator","dialog":[]},{"name":"Mike Stake","avatar":"assets/images/avatars/4.jpg","unread":0,"position":"Agent","dialog":[]},{"name":"Janie Lawrence","avatar":"assets/images/avatars/5.jpg","unread":0,"position":"Agent","dialog":[]}]')}}]);